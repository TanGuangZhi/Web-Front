<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./bootstrap5/css/bootstrap.min.css">
</head>

<body>
    <div class="contianer">
        <div class="mian">
            <div class="row">
                <div class="col-3">
                    <button type='button' class="btn btn-success" id="addStuBtn">add</button>

                </div>
            </div>
            <table class="table">
                <thead>
                    <th>id</th>
                    <th>name</th>
                    <th>age</th>
                    <th>score</th>
                    <th>button</th>
                </thead>
                <tbody id="showTbody">
                    <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                        <td>4</td>
                        <td>
                            <button type='button' class="btn btn-light">change</button>
                            <button type='button' class="btn btn-light">del</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <script src="./bootstrap5/js/jquery-3.5.1.min.js"></script>
    <script src="./bootstrap5/js/bootstrap.bundle.min.js"></script>
    <script src="./js/stu.js"></script>
    <script>
        let stu = [
            {
                stuId: "5001",
                stuName: "张三",
                stuPass: "1234",
                stuPhone: "12580",
                stuScore: 87,
                stuAge: 17,
                status: "right"
            },
            {
                stuId: "5002",
                stuName: "张三丰",
                stuPass: "1234",
                stuPhone: "12581",
                stuScore: 87,
                stuAge: 20,
                status: "right"
            },
            {
                stuId: "5003",
                stuName: "ios",
                stuPass: "1234",
                stuPhone: "12582",
                stuScore: 67,
                stuAge: 18,
                status: "right"
            },
            {
                stuId: "5004",
                stuName: "张无忌",
                stuPass: "1234",
                stuPhone: "12583",
                stuScore: 77,
                stuAge: 19,
                status: "right"
            },
            {
                stuId: "5005",
                stuName: "张学友",
                stuPass: "1234",
                stuPhone: "12584",
                stuScore: 57,
                stuAge: 23,
                status: "right"
            },
            {
                stuId: "5006",
                stuName: "marry",
                stuPass: "1234",
                stuPhone: "12585",
                stuScore: 87,
                stuAge: 16,
                status: "right"
            }
        ];
        let newStudent = new Student(stu);

        function showTable(params) {
            let stuArr = newStudent.queryStudent();
            let str = ``;
            stuArr.forEach(element => {
                str += `
                    <tr>
                        <td>${element.stuId}</td>
                        <td>${element.stuName}</td>
                        <td>${element.stuAge}</td>
                        <td>${element.stuScore}</td>
                        <td>
                             <button type='button' class="btn btn-light" onclick="changeStu(${element.stuId})">change</button>
                             <button type='button' class="btn btn-light" onclick="delStu(${element.stuId})">del</button>
                             </td>
                    </tr>
            `
            });
            $('#showTbody').html(str);
        }

        $('#addStuBtn').click(() => {
            newStudent.addStudent("5003", "mary", "1234", "12588", "90", "19", "right");
            showTable();
        });

        function delStu(params) {
            console.log(params);
            newStudent.delStudent(params);
            showTable();
        }

        function changeStu(params) {
            newStudent.changeStudent(params, { stuName: "tom2" });
            showTable();
        }
        showTable();
    </script>
</body>

</html>