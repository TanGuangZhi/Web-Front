<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <script type="text/javascript">
       /* setTimeout(function () {
            console.log("我们常说打架");
            setTimeout(function () {
                console.log("要讲武德");
                setTimeout(function () {
                    console.log("不能偷袭");
                },2000);
            },2000);
        },2000);
        console.log("start...")*/
       /**
        * 任务成功了 调用 resolve() ==>then(回调函数)
        * 任务失败了 调用 reject()  ==>catch(回调函数)
        * */
       function talk(talkContent) {
          return  new Promise((resolve,reject)=>{
              //2秒后执行  resolve函数
                setTimeout(function () {
                    resolve(talkContent);
                },2000);
           });
       }
       //1.能够完美解决回调地狱问题...
      /* talk("年轻人打架")
           .then((result)=>{
                //如果resolve函数执行了,那么then中的回调函数马上执行
               console.log(result);
               return talk("应该讲点武德吧");
           }).then((result)=>{
               console.log(result);
               return talk("不能打脸吧");
            }).then((result)=>{
                console.log(result);
            });*/

      /*async function test01() {
          console.log(await talk("年轻人打架"));
          console.log(await talk("讲点武德"));
          console.log(await talk("别搞偷袭"));
      }
      test01();*/
      //1.调用匿名的异步函数
       (async ()=>{
           console.log(await talk("年轻人打架"));//代替.then() 提高代码可读性
           console.log(await talk("讲点武德"));
           console.log(await talk("别搞偷袭"));
       })();


       //扩展一下:async的用法
       async function delay() {
            /*return new Promise((resolve,reject)=>{
                resolve("成功");
            })*/
            return await "成功";
        }

      /* delay().then((result)=>{
          console.log(result);
       });*/
       (async ()=>{
           console.log(await delay());
       })();

    </script>
</body>
</html>