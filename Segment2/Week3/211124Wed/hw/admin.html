<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- 必须的 meta 标签 -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap 的 CSS 文件 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>
</head>

<body>

    <div class="modal fade" id="addModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">添加用户</h4>
                </div>
                <div class="modal-body">
                    <form class="form-inline text-center">
                        <p>
                            用户名: <input type="text" name="userName" id="addNameId" placeholder="请输入用户名"
                                class="form-control">
                        </p>
                        <p>
                            密　码: <input type="text" name="userName" id="addPassId" placeholder="请输入密码"
                                class="form-control">
                        </p>
                        <p>
                            手机号: <input type="text" name="userName" id="addPhoneId" placeholder="请输入手机号"
                                class="form-control">
                        </p>
                        <p>
                            <button type="button" class="btn btn-primary" data-dismiss="modal" data-bs-toggle="modal"
                                onclick="addUser()" data-bs-whatever="@mdo">添加</button>
                            <button type="button" class="btn btn-danger" data-dismiss="modal" data-bs-toggle="modal">返回</button>
                        </p>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!--修改用户的模态框-->
    <div class="modal fade" id="updateModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">修改用户</h4>
                </div>
                <div class="modal-body">
                    <form class="form-inline text-center">
                        <p>
                            编　号:<input type="text"  id="changeIdId" readonly value="1" class="form-control">
                        </p>
                        <p>
                            用户名: <input type="text" id="changeNameId" name="userName" placeholder="请输入用户名"
                                class="form-control">
                        </p>
                        <p>
                            密　码: <input type="text" id="changePwdId" placeholder="请输入密码" class="form-control">
                        </p>
                        <p>
                            手机号: <input type="text" id="changPhoneId" placeholder="请输入手机号" class="form-control">
                        </p>
                        <p>
                            <button type="button" class="btn btn-primary" data-dismiss="modal" data-bs-toggle="modal"
                                data-bs-target="#updateModal" data-bs-whatever="@mdo" onclick="changeUser(0)">修改</button>
                            <button type="button" class="btn btn-danger" data-dismiss="modal" data-bs-toggle="modal">返回</button>
                        </p>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <h2 class="text-center">用户管理</h2>
    <div class="container">
        <div class="row" style="line-height: 60px">
            <div class="col-md-12 text-right">
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addModal"
                    data-bs-whatever="@mdo">添加</button>
            </div>
        </div>
        <div class="row">
            <table class="col-md-12 table-bordered text-center table-hover">
                <tr style="line-height: 50px;background:aqua">
                    <td>
                        <label><input type="checkbox" onchange="selAll(this.checked)" id="all-id">全选/全消</label>
                    </td>
                    <td>编号</td>
                    <td>用户名</td>
                    <td>密码</td>
                    <td>手机号</td>
                    <td>头像</td>
                    <td colspan="2">操作</td>
                </tr>
                <tbody id="tab-show">
                    <tr>
                        <td>
                            <label>选项<input type="checkbox" class="sel"></label>
                        </td>
                        <td>1</td>
                        <td>jack</td>
                        <td>1234</td>
                        <td>12580</td>
                        <td>
                            <img src="../film//0.jpg" width="50px" class="img-circle" alt="">
                        </td>
                        <td><button type="button" class="btn btn-danger"><span class="glyphicon glyphicon-remove"
                                    onclick="delUser(i)"></span> 删除</button></td>
                        <td><button type="button" class="btn btn-primary" ><span class="glyphicon glyphicon-edit"></span>
                                修改</button></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="row">
            <div class="col-md-12 text-center">
                <ul class="pagination">
                    <li><a href="#">&laquo;</a></li>
                    <li><a href="#">1</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">&raquo;</a></li>
                </ul>
            </div>
        </div>
    </div>
    <script src="js/jquery-3.5.1.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>

    <script type="text/javascript">
        let userArray = [
            { id: 1, userName: "武广东", userPass: "1234", userPhone: "12580", userImg: "../film/9.jpg" },
            { id: 2, userName: "杨光", userPass: "1234", userPhone: "12581", userImg: "../film//1.jpg" },
            { id: 3, userName: "聪聪", userPass: "1234", userPhone: "12582", userImg: "../film//2.jpg" },
            { id: 4, userName: "大潘", userPass: "1234", userPhone: "12583", userImg: "../film//3.jpg" },
            { id: 5, userName: "小潘", userPass: "1234", userPhone: "12584", userImg: "../film//4.jpg" },
            { id: 6, userName: "李小龙", userPass: "1234", userPhone: "12585", userImg: "../film//5.jpg" },
            { id: 7, userName: "成龙", userPass: "1234", userPhone: "12586", userImg: "../film//6.jpg" },
            { id: 8, userName: "李世民", userPass: "1234", userPhone: "12587", userImg: "../film//7.jpg" },
            { id: 9, userName: "刘备", userPass: "1234", userPhone: "12588", userImg: "../film//8.jpg" }
        ];

        //1.查询所有的用户
        function queryUser() {
            let str = ``;
            for (let i = 0; i < userArray.length; i++) {
                str += `<tr>
                    <td>选项<input type="checkbox" class="sel" onchange="checkAll()"></td>
                    <td>${userArray[i].id}</td>
                    <td>${userArray[i].userName}</td>
                    <td>${userArray[i].userPass}</td>
                    <td>${userArray[i].userPhone}</td>
                    <td><img src="${userArray[i].userImg}" width="50px" class="img-circle"></td>
                    <td><button type="button" class="btn btn-danger" onclick="delUser(${i})"><span
                                    class="glyphicon glyphicon-remove" " ></span> 删除</button></td>
                    <td> <button type="button" class="btn btn-primary" data-dismiss="modal" data-bs-toggle="modal"
                         data-bs-target="#updateModal" onclick="setIndex(${i})" data-bs-whatever="@mdo">修改</button></td>
                </tr>`;
            }
            let tabDom = document.getElementById("tab-show");
            tabDom.innerHTML = str;
        }
        queryUser();


        // 2. 添加用户
        let count = 10;
        function addUser(params) {
            let user = {};
            user.userName = document.getElementById("addNameId").value;
            user.userPass = document.getElementById("addPassId").value;
            user.userPhone = document.getElementById("addPhoneId").value;
            user.id = count;
            user.userImg = "../film//8.jpg";
            userArray.push(user);
            count++;
            alert("添加成功");

            document.getElementById("addNameId").value = "";
            document.getElementById("addPassId").value = "";
            document.getElementById("addPhoneId").value = "";
            queryUser();
        }

        function delUser(id) {
            userArray.splice(id, 1);
            queryUser();
        }

        function changeUser() {
            userArray[changeIndex].userName = document.getElementById("changeNameId").value;
            userArray[changeIndex].userPass = document.getElementById("changePwdId").value;
            userArray[changeIndex].userPhone = document.getElementById("changPhoneId").value;

            document.getElementById("changeNameId").value = "";
            document.getElementById("changePwdId").value = "";
            document.getElementById("changPhoneId").value = "";
            queryUser();
        }

        let changeIndex;
        function setIndex(index) {
            document.getElementById("changeIdId").value = index+1;
            changeIndex = index;
        }

    </script>
</body>

</html>